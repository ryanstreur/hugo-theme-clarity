<nav class="bg-color">
  <ul class="menu">
    {{ $currentPage := . }}
    {{ range .Site.Menus.main }}
    {{ if .HasChildren }}
    <li>
      <details {{ if ($currentPage.HasMenuCurrent "main" .) }}open{{end}}>
        <summary class="{{ if ($currentPage.HasMenuCurrent "main" .) }}active{{ end }}">
          <a href="{{ .URL }}">
            {{ .Pre }}
            <span>{{ .Name }}</span>
          </a>
        </summary>

        <ul class="sub-menu">
          {{ range .Children }}
          <li class="{{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}">
            <a href="{{ .URL }}">{{ .Name }}</a>
          </li>
          {{ end }}
        </ul>

      </details>
    </li>

    {{ else }}

    <li>
      <a href="{{ .URL }}">
        {{ .Pre }}
        <span>{{ .Name }}</span>
      </a>
    </li>

    {{ end }}
    {{ end }}
  </ul>
</nav>
