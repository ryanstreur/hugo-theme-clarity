<nav class="bg-color">
    <ul class="menu">
        <li class="nav-title stick-to-top bg-color">
            <a href="/">{{ .Site.Title }}</a>
        </li>
        {{ $currentPage := . }}
        {{ range .Site.Menus.main }}
        {{ if .HasChildren }}
        <li class="{{ if ($currentPage.HasMenuCurrent "main" .) }}active{{ end }}">
            <a href="{{ .URL }}">
                {{ .Pre }}
                <span>{{ .Name }}</span>
            </a>
        </li>

        {{ if $currentPage.HasMenuCurrent "main" . }}
        <ul class="sub-menu">
            {{ range .Children }}
            <li class="{{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}">
                <a href="{{ .URL }}">{{ .Name }}</a>
            </li>
            {{ end }}
        </ul>
        {{ end }}

        {{ else }}
        <li>
            <a href="{{ .URL }}">
                {{ .Pre }}
                <span>{{ .Name }}</span>
            </a>
        </li>
        {{ end }}
        {{ end }}
    </ul>
</nav>
